@model IEnumerable<Ajanvarausprojekti.ViewModels.ajatListaData>

@*@section Scripts {
        <script type="text/javascript">
            $(function () {
                $(".valitseAika").click(function () {
                    let aika_id = $(this).data("aikaId");
                    alert("Klikkasit aikaa, jonka aika-id on " + aika_id);
                });
            });
        </script>
    }*@

@*@section Scripts {
    <script type="text/javascript">
        $(function () {
            $(".getModalEdit").click(function () {
                let aika_id = $(this).data("aikaId");
                console.log("Klikkasit aikaa: " + aika_id);
                var url = "/Ajat/_ModalEdit/?id=" + aika_id;
                console.log(url);
                $("#ajatEdit").append(" <b>Avataan ajan " + aikat_id + " muokkausikkuna...</b>");
                var $detailDivEdit = $("#ajatEdit");
                $.get(url, function (data) {
                    $detailDivEdit.replaceWith(data);
                    $('#ModalEdit').modal('show');
                });
            });
        });
        $(function () {
            $(".delAjatid").click(function () {
                let aika_id = $(this).data("aikaId");
                console.log("Klikkasit poistettavaa aikaa: " + aika_id);
                var url = "/Ajat/_ModalDelete/?id=" + aika_id;
                console.log(url);
                $("#ajatDelete").append(" <b>Avataan ajan " + aika_id + " poistoikkuna...</b>");
                var $detailDivDelete = $("#ajatDelete");
                $.get(url, function (data) {
                    $detailDivDelete.replaceWith(data);
                    $('#ModalDelete').modal('show');
                });
            });
        });
    </script>*@
}

<section class="container-fluid bg-black pt-5 pb-5 mb-5">
    <div class="container">
        <div class="d-flex justify-content-between pt-3">
            <h2 class="text-white">Varattavissa olevat vapaat ohjausajat</h2>
            <a href="#" class="ms-3 mt-1 d-flex justify-content-end">
                <svg xmlns="http://www.w3.org/2000/svg" width="2.9rem" height="2.9rem" fill="var(--black-color)" class="bi bi-plus bg-primary rounded-3" viewBox="0 0 16 16">
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
                </svg>
            </a>
        </div>
        <p class="lead text-white mb-5">Ajan poisto onnistuu nappia klikkaamalla.</p>
        <div class="text-white justify-content-center align-items-center text-center justify-content-md-start align-items-md-start text-md-start px-0 mx-0">


            @*Modaalien paikkamerkit edit ja delete, Jquery luo rutiinin avulla modaalit*@
            <div id="ajatEdit"></div>
            <div id="ajatDelete"></div>



            @{
                string aika = "";
                string pvm = "";


            }
            @foreach (var item in Model)
            {
                aika = Convert.ToDateTime(item.Alkuaika).ToString("dd.MM.yyyy");


                if (aika != pvm)
                {<div class="col mb-2 fw-bold fs-5"> @Convert.ToDateTime(item.Alkuaika).ToString("dd.MM.yyyy")</div>


                foreach (var item1 in Model)
                {
                    if (@Convert.ToDateTime(item1.Alkuaika).ToString("dd.MM.yyyy") == aika)
                    {
                        <button class="btn btn-primary mb-3 row-cols-6" type="button" onclick="location.href='@Url.Action("AjatDelete", "Ajat", new { id = item1.aika_id })'">@Convert.ToDateTime(item1.Alkuaika).ToString("HH:mm") - @Convert.ToDateTime(item1.Alkuaika).AddMinutes(item1.Kesto).ToString("HH:mm")  </button>
                        pvm = Convert.ToDateTime(item1.Alkuaika).ToString("dd.MM.yyyy");
                    }
                }


            }


        }


        </div>
    </div>
</section>
