@model IEnumerable<Ajanvarausprojekti.ViewModels.palauteListaData>

@{
    ViewBag.Title = "Palautelistaus";
}
@section Scripts {
    <script type="text/javascript">
        $(function () {
            $(".getPalauteModal").click(function () {
                let palaute_id = $(this).data("palauteid");
                console.log("Klikkasit palautetta: " + palaute_id);
                var url = "/Palaute/_Details/?id=" + palaute_id;
                console.log(url);

                $("#Modaltesti").append(" <b>Avataan palautteen " + palaute_id + "tietoja...</b>");

                var $detailDivDetails = $("#Modaltesti");
                $.get(url, function (data) {
                    $detailDivDetails.replaceWith(data);
                    $("#palauteModaltesti").modal("show");
                });
            });
        });
    </script>
}

@*<td><button class="getPalauteModal" data-palauteid="@item.palaute_id">lue lisää</button></td>*@

<div id="Modaltesti"></div>

<section class="container-fluid bg-black pt-lg-3 pb-5 ">
    <div class="container pt-5">
        <div class="col-12 table-responsive">
            <div class="d-flex justify-content-between w-100">
                <h2 class="text-white pb-5" id="TarkastelePalaute">Uusimmat palautteet</h2>
            </div>
            <table class="table table-dark table-hover caption table-bordered">
                <caption class="text-white-50">Palautteet</caption>
                <thead>
                    <tr>
                        <th scope="col">Päivämäärä</th>
                        <th scope="col">Aihe</th>
                        <th scope="col">Palaute</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Reverse().Take(5))
                    {
                    <tr>
                        <td scope="row">@Html.DisplayFor(modelItem => item.palaute_pvm)</td>
                        <td>@Html.DisplayFor(modelItem => item.palautetyyppi)</td>
                        <td>@Html.DisplayFor(modelItem => item.palaute)</td>
                        <td><button class="getPalauteModal btn btn-primary ms-1" data-palauteid="@item.palaute_id">Lue lisää</button></td>
                        <!--<td>
                            <p>

                                <a href="#" class="mt-3 mt-sm-0 ms-3 getPalauteModal" data-palauteid="@item.palaute_id">-->

                                    <!--Tämä on tarkastele palautetta-nappi-->
                                    <!--<svg xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" fill="var(--black-color)" class="bi bi-card-list bg-white rounded-3 p-2 mt-3" viewBox="0 0 16 16">
                                        <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z" />
                                        <path d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z" />
                                    </svg>
                                </a>
                            </p>
                        </td>-->
                    </tr>
                    }
                </tbody>
            </table>
            <!--Sivunumerokomponentti-->
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-end">
                    <li>
                        @*<a href="~/Views/Palaute/LueKaikki.cshtml" class="btn btn-primary ms-3">Kaikki Palautteet</a>*@
                        @using (Html.BeginForm("LueKaikki", "Palaute", FormMethod.Get))
                        {
                            <button class="btn btn-primary ms-3">Kaikki Palautteet</button>
                        }
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</section>

