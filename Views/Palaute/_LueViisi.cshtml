@model IEnumerable<Ajanvarausprojekti.ViewModels.palauteListaData>

@{
    ViewBag.Title = "Palautelistaus";
}

<style>

    /* The Modal (background) */
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 25%;
    }
</style>


<section class="container-fluid bg-black pt-lg-3 pb-5 ">
    <div class="container pt-5">
        <div class="col-12 table-responsive-md">
            <div class="d-flex justify-content-start w-100">
                <h2 class="text-white pb-3" id="TarkastelePalaute">Uusimmat palautteet</h2>

                <div id="lueLisaa" class="text-info"></div>

            </div>
            <p class="lead text-white mb-5">Huom! Mikäli oppilas on kirjoittanut palautteen loppuun yhteystietonsa, hän toivoo että häneen ollaan yhteydessä.</p>
            <table class="table table-dark table-hover caption table-bordered">
                <caption class="text-white-50">Uusimmat palautteet</caption>
                <thead>
                    <tr>
                        <th scope="col" id="PalauteInfo"><span style="cursor:pointer">Palaute<sup>*</sup></span></th>
                        <th scope="col">Aihe</th>
                        <th scope="col">Päivämäärä</th>
                        <td scope="col"></td>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Reverse().Take(5))
                    {
                        <tr>
                            <td scope="row" class="td-truncate">@Html.DisplayFor(modelItem => item.palaute)</td>
                            <td>@Html.DisplayFor(modelItem => item.palautetyyppi)</td>
                            <td>@Convert.ToDateTime(item.palaute_pvm).ToString("d.M.yyyy")</td>
                            <td><button class="getPalauteID btn btn-primary ms-1" data-palauteid="@item.palaute_id">Lue lisää</button></td>
                        </tr>
                    }
                </tbody>
            </table>
            <!--Sivunumerokomponentti-->
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-end">
                    <li>
                        @using (Html.BeginForm("LueKaikki", "Palaute", FormMethod.Get))
                        {
                            <button class="btn btn-primary ms-3">Kaikki Palautteet</button>
                        }
                    </li>
                </ul>
            </nav>
        </div>
    </div>

</section>

@*Info-modaali "Mikäli opiskelija on kirjoittanut palautteen loppuun yhteystietonsa..."*@
<div id="infoModal" class="modal">
    <div class="modal-content">
        <span class="close"></span>
        <p>
            *Mikäli opiskelija on kirjoittanut palautteen loppuun yhteystietonsa,
            opiskelija toivoo että häneen ollaan yhteydessä.
        </p>
    </div>
</div>